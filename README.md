# react-fastapi-prototype

## ğŸ§­ æ¦‚è¦

**react-fastapi-prototype** ã¯ã€  
**ã€Œé–‹ç™ºåˆæœŸã«å³ã‚¢ãƒ—ãƒªã‚’ç«‹ã¡ä¸Šã’ã€ãƒ­ã‚¸ãƒƒã‚¯ã«é›†ä¸­ã™ã‚‹ãŸã‚ã®æœ€å°æ§‹æˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€** ã§ã™ã€‚

React (Vite) + FastAPI + MySQL ã‚’ **Docker Compose** ã§çµ±åˆã—ã€  
Caddy ã«ã‚ˆã£ã¦å¤–éƒ¨ã‹ã‚‰ã¯å˜ä¸€ãƒãƒ¼ãƒˆï¼ˆ5173ï¼‰ã§è¦‹ãˆã‚‹æ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚

> é–‹ç™ºãƒ»æœ¬ç•ªã‚’åŒºåˆ¥ã›ãšã€  
> ã€Œnpm run devã€ä¸€ç™ºã§ãƒ•ãƒ­ãƒ³ãƒˆã‚‚ãƒãƒƒã‚¯ã‚‚ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã—ãªãŒã‚‰å‹•ã‹ã™ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ’¡ ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ€æƒ³

### âœ… ã—ã¦ã„ã‚‹ã“ã¨
- **æœ€çŸ­ã§å‹•ã**ï¼š`docker compose up` ã ã‘ã§ä¾å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‹ãƒ“ãƒ«ãƒ‰ï¼‹èµ·å‹•  
- **å˜ä¸€ãƒãƒ¼ãƒˆæ§‹æˆ**ï¼šCaddyã§ `/api` ã‚’FastAPIã«ã€ãã®ä»–ã‚’Reactã«ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·  
- **é–‹ç™º/æœ¬ç•ªã®åŒºåˆ¥ã‚’ã—ãªã„**ï¼šåŒã˜ `.env` ã¨åŒã˜ã‚³ãƒãƒ³ãƒ‰ã§å‹•ä½œ  
- **VS Codeã§å³ç·¨é›†ã§ãã‚‹**ï¼š`node_modules`ã‚’ãƒ›ã‚¹ãƒˆå´ã«ç½®ããŸã‚ã€å‹è£œå®Œã‚¨ãƒ©ãƒ¼ãªã—  
- **Todoã‚¢ãƒ—ãƒªå®Ÿè£…æ¸ˆã¿**ï¼šå‹•ä½œç¢ºèªãŒã™ãã§ãã‚‹ã‚µãƒ³ãƒ—ãƒ«ä»˜ã  

### ğŸš« ã—ã¦ã„ãªã„ã“ã¨
- **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½**ï¼ˆä¾‹ï¼šAlembicï¼‰ã¯æœªæ­è¼‰ï¼ˆå¿…è¦ãªã‚‰å¾Œã‹ã‚‰è¿½åŠ ï¼‰  
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**ï¼ˆnpmã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚„ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ãªã©ï¼‰ã¯æœªå®Ÿè£…  
- **æœ¬ç•ªå°‚ç”¨ãƒ“ãƒ«ãƒ‰**ã‚„**ç’°å¢ƒåˆ†é›¢**ã‚‚ã—ã¦ã„ã¾ã›ã‚“  
- **é•·æœŸé–‹ç™ºã‚’æƒ³å®šã—ãŸæ§‹æˆç®¡ç†**ã¯ã‚ãˆã¦è¡Œã£ã¦ã„ã¾ã›ã‚“  

> **ç›®çš„ã¯ã€Œæœ€åˆã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ãå§‹ã‚ã‚‹ã¾ã§ã®éšœå£ã‚’æ¥µé™ã¾ã§æ¸›ã‚‰ã™ã“ã¨ã€ã€‚**  
> ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—æ®µéšã§ã¯ã€Œå‹•ãã€ã“ã¨ã‚’æœ€å„ªå…ˆã«ã—ã¦ã„ã¾ã™ã€‚  
>  
> é•·æœŸé–‹ç™ºã‚„æœ¬ç•ªé‹ç”¨ã§ä¸éƒ½åˆãŒã‚ã‚Œã°ã€**ã“ã®æ§‹æˆã‚’ãƒ™ãƒ¼ã‚¹ã«è‡ªç”±ã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚**

---

## âš™ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1ï¸âƒ£ `.env` ã‚’æº–å‚™
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.env` ã‚’ä½œæˆã—ã¾ã™ã€‚  
`.env.example` ã«ä¾‹ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

ç‰¹ã«ã“ã ã‚ã‚ŠãŒãªã‘ã‚Œã°ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§OKã§ã™ï¼š

```bash
cp .env.example .env
````

ã“ã® `.env` ã¯ **MySQL ã®ç’°å¢ƒå¤‰æ•°**ã‚’å®šç¾©ã—ã¾ã™ã€‚
MySQL ã‚³ãƒ³ãƒ†ãƒŠã¨ FastAPI åŒæ–¹ã§åŒã˜å€¤ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

---

### 2ï¸âƒ£ ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•

```bash
docker compose up
```

ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»ãƒ“ãƒ«ãƒ‰ã‚’å«ã‚ã¦è‡ªå‹•çš„ã«èµ·å‹•ã—ã¾ã™ã€‚

---

### 3ï¸âƒ£ ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª

[http://localhost:5173](http://localhost:5173) ã«ã‚¢ã‚¯ã‚»ã‚¹ã€‚

React + FastAPI + MySQL ãŒæ¥ç¶šã•ã‚ŒãŸçŠ¶æ…‹ã§ã€
ç°¡å˜ãª **Todo ã‚¢ãƒ—ãƒª** ãŒå‹•ä½œã—ã¾ã™ã€‚

---

## ğŸ§± æ§‹æˆ

```
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .env.example
â”œâ”€â”€ Caddyfile
â”œâ”€â”€ backend
â”‚   â”œâ”€â”€ app
â”‚   â”‚   â””â”€â”€ main.py
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ db
â”‚   â”œâ”€â”€ data
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â””â”€â”€ init
â”‚       â””â”€â”€ 001_schema.sql
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ frontend
    â”œâ”€â”€ index.html
    â”œâ”€â”€ package.json
    â”œâ”€â”€ src
    â”‚   â”œâ”€â”€ App.tsx
    â”‚   â””â”€â”€ main.tsx
    â””â”€â”€ vite.config.ts
```

---

## ğŸ” ãƒãƒ¼ãƒˆæ§‹æˆã¨ãƒ—ãƒ­ã‚­ã‚·

* **React (Vite)** â†’ `5173`
* **FastAPI** â†’ `8000`
* **Caddy** â†’ `5173`ï¼ˆå¤–éƒ¨å…¬é–‹ãƒãƒ¼ãƒˆï¼‰

Caddyfileã®å†…å®¹ï¼š

```caddy
:5173 {
  # /api ã¯ FastAPI ã¸
  handle /api* {
    reverse_proxy backend:8000
  }
  # ãã‚Œä»¥å¤–ã¯ãƒ•ãƒ­ãƒ³ãƒˆã¸
  reverse_proxy frontend:5173
}
```

å¤–éƒ¨ã‹ã‚‰ã¯ `5173` ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã€
`/api` ã¯è‡ªå‹•çš„ã« FastAPI ã«è»¢é€ã•ã‚Œã¾ã™ã€‚

---

## ğŸ”— React ã‹ã‚‰ã® API ã‚¢ã‚¯ã‚»ã‚¹

ãƒ•ãƒ­ãƒ³ãƒˆå´ã§ã¯ç¾åœ¨é–‹ã„ã¦ã„ã‚‹ãƒ›ã‚¹ãƒˆã‚’ãã®ã¾ã¾ API ãƒ™ãƒ¼ã‚¹URLã«åˆ©ç”¨ã—ã¾ã™ã€‚

```ts
// ç¾åœ¨ã®ã‚ªãƒªã‚¸ãƒ³ã‚’ãã®ã¾ã¾APIã®ãƒ™ãƒ¼ã‚¹URLã«
const API_BASE = `${window.location.origin}/api`
```

ã“ã‚Œã«ã‚ˆã‚Šã€
**é–‹ç™ºï¼æœ¬ç•ªã‚’æ„è­˜ã›ãš** åŒã˜ã‚³ãƒ¼ãƒ‰ã§APIé€šä¿¡ãŒå¯èƒ½ã§ã™ã€‚

---

## ğŸ§© ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã©ã†ä½¿ã†ã‹

ã“ã®æ§‹æˆã¯ã€Œ**ä¸€äººã§PoCãƒ»è©¦ä½œã‚’æœ€é€Ÿã§å½¢ã«ã™ã‚‹**ã€ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚

* ã¨ã«ã‹ãæ—©ãå‹•ä½œç¢ºèªã—ãŸã„
* ãƒãƒ¼ãƒ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã‚’æœ€å°åŒ–ã—ãŸã„
* ã‚³ãƒ¼ãƒ‰ä¸­å¿ƒã§è­°è«–ã‚’é€²ã‚ãŸã„

ã¨ã„ã£ãŸã‚±ãƒ¼ã‚¹ã«æœ€é©ã§ã™ã€‚

> ä¸€æ–¹ã§ã€ãƒãƒ¼ãƒ é–‹ç™ºãƒ»é•·æœŸé‹ç”¨ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ãŒå‡ºã¦ããŸã‚‰
> **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼æœ¬ç•ªãƒ“ãƒ«ãƒ‰ï¼ç’°å¢ƒåˆ†é›¢**ãªã©ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
> ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã€Œæœ€åˆã®åœ°ãªã‚‰ã—ã€ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ§‘â€ğŸ’» é–‹ç™ºè€…ãƒ¡ãƒ¢

* **FastAPI**: `backend/app/main.py`
* **React (Vite)**: `frontend/src`
* **DBåˆæœŸåŒ–SQL**: `db/init/001_schema.sql`
* **ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**:

  * Python â†’ `backend/requirements.txt`
  * Node.js â†’ `frontend/package.json`
* **DBæ°¸ç¶šåŒ–**: `db_data`ï¼ˆDockerãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰

---

## ğŸª¶ License

MIT License